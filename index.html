<!doctype html>
<html lang="bn">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>ExamBangla тАФ Next Level (Share Card + Leaderboard)</title>
<meta name="description" content="ExamBangla: Class 6-9 quiz system with timer, leaderboard and uneditable share card (image)." />
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Noto+Sans+Bengali:wght@400;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg1:#0f172a; --bg2:#3b82f6;
  --card: rgba(255,255,255,0.06);
  --muted: rgba(255,255,255,0.85);
  --accent:#06b6d4;
  --ok:#10b981; --err:#ef4444;
}
*{box-sizing:border-box}
body{
  margin:0; min-height:100vh; font-family:'Poppins','Noto Sans Bengali',sans-serif;
  background: linear-gradient(135deg,var(--bg1),#1f2937 60%,var(--bg2));
  color:#fff; display:flex; align-items:flex-start; justify-content:center; padding:24px;
}
.app { width:100%; max-width:1000px; }
.header { display:flex; gap:12px; align-items:center; margin-bottom:16px; }
.logo { width:64px;height:64px;border-radius:12px;background:linear-gradient(180deg,#fff,#f1f1f1); color:#111; display:flex;align-items:center;justify-content:center;font-weight:800; box-shadow:0 12px 30px rgba(0,0,0,0.3); }
.h1 { margin:0; font-size:20px; line-height:1; }
.h2 { margin:4px 0 0 0; font-size:13px; color:rgba(255,255,255,0.85); }

.grid { display:grid; grid-template-columns: 1fr 360px; gap:18px; }
@media(max-width:980px){ .grid{ grid-template-columns:1fr } }

.card {
  background: var(--card); border-radius:14px; padding:16px; backdrop-filter: blur(8px);
  box-shadow: 0 20px 40px rgba(0,0,0,0.35);
}
.title { font-weight:700; font-size:18px; margin-bottom:6px; }
.small { font-size:13px; color:rgba(255,255,255,0.85); }

.row { display:flex; gap:10px; flex-wrap:wrap; margin-top:8px; }
.btn { padding:10px 12px; border-radius:10px; border:none; cursor:pointer; font-weight:700; background:linear-gradient(90deg,#ff8a8a,#ff6b6b); color:#fff; }
.btn.secondary { background:linear-gradient(90deg,#06b6d4,#3b82f6); color:#042a2b; }
.btn.ghost { background:transparent; border:1px solid rgba(255,255,255,0.08); color:var(--muted); }

.select { width:100%; padding:10px; border-radius:8px; border:none; outline:none; font-weight:700; margin-top:8px; }

.quiz-area { display:flex; flex-direction:column; gap:12px; }
.question { font-size:20px; font-weight:700; text-align:center; padding:8px; }
.options { display:flex; flex-direction:column; gap:10px; }
.opt { padding:12px; border-radius:10px; border:none; background:rgba(255,255,255,0.05); color:#fff; font-weight:700; cursor:pointer; transition:transform .12s, box-shadow .12s; }
.opt:hover{ transform: translateY(-4px) }
.opt.correct{ background: linear-gradient(90deg,var(--ok),#05a66b); box-shadow:0 18px 40px rgba(16,185,129,0.08); }
.opt.wrong{ background: linear-gradient(90deg,var(--err),#f43f5e); box-shadow:0 18px 40px rgba(239,68,68,0.08); }

.controls { display:flex; justify-content:space-between; align-items:center; gap:8px; margin-top:8px; }
.score { font-weight:800; padding:8px 10px; border-radius:10px; background:rgba(0,0,0,0.12) }
.progress { height:10px; background:rgba(255,255,255,0.06); border-radius:999px; overflow:hidden; margin-top:8px; }
.progress > i { display:block; height:100%; width:0%; background:linear-gradient(90deg,#ffdd59,#ff6b6b); transition:width .3s ease; }

.explain { background:rgba(0,0,0,0.08); padding:10px; border-radius:8px; color:#f1f1f1; }

.side .card { position:sticky; top:20px; }

.leaderboard ul{ list-style:none; padding:0; margin:0; }
.leaderboard li{ display:flex; justify-content:space-between; padding:8px; border-radius:8px; background:rgba(255,255,255,0.03); margin-bottom:8px; }

.input { width:100%; padding:10px; border-radius:8px; border:none; outline:none; margin-top:8px; }

.footer { margin-top:12px; text-align:center; font-size:13px; color:rgba(255,255,255,0.8) }
.small-muted { font-size:13px; color:rgba(255,255,255,0.7) }
</style>
</head>
<body>
  <div class="app">
    <header class="header">
      <div class="logo">EB</div>
      <div>
        <div class="h1">ExamBangla</div>
        <div class="h2">Class 6тАУ9 тАв Lessons тАв Timer тАв Uneditable Share Card</div>
      </div>
    </header>

    <div class="grid">
      <!-- main -->
      <main>
        <!-- selectors -->
        <section class="card" id="startCard">
          <div class="title">рж╢рзБрж░рзБ ржХрж░рзЛ тАФ Class / Subject / Lesson</div>
          <div class="small">Step 1: Class ржирж┐рж░рзНржмрж╛ржЪржи</div>
          <div class="row" id="classRow">
            <button class="btn" onclick="chooseClass(6)">Class 6</button>
            <button class="btn" onclick="chooseClass(7)">Class 7</button>
            <button class="btn" onclick="chooseClass(8)">Class 8</button>
            <button class="btn" onclick="chooseClass(9)">Class 9</button>
          </div>

          <div class="small" style="margin-top:10px">Step 2: Subject</div>
          <div class="row">
            <button class="btn secondary" onclick="chooseSubject('BGS')">Bangladesh & World (BGS)</button>
            <button class="btn secondary" onclick="chooseSubject('Science')">Science</button>
            <button class="btn secondary" onclick="chooseSubject('Bangla')">Bangla</button>
            <button class="btn secondary" onclick="chooseSubject('English')">English</button>
          </div>

          <div class="small" style="margin-top:10px">Step 3: Lesson (select)</div>
          <select id="lessonSelect" class="select" onchange="chooseLesson(this.value)"><option value="">-- ржкрзНрж░ржержорзЗ Class ржУ Subject рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзЛ --</option></select>

          <div style="margin-top:12px; display:flex; gap:8px;">
            <button class="btn secondary" id="startBtn" onclick="startQuiz()" disabled>Start Quiz тЦ╢</button>
            <button class="btn ghost" onclick="toggleShuffle()">Shuffle: ON</button>
          </div>

          <div style="margin-top:12px" class="small-muted">
            Timer per question: <input id="timerInput" class="input" type="number" value="30" min="5" max="600" style="width:110px; display:inline-block" />
          </div>

          <div style="margin-top:12px" class="small-muted">
            Developer: Md Tishan тАФ Class 8 тАв ExamBangla
          </div>
        </section>

        <!-- quiz -->
        <section class="card hidden" id="quizCard" aria-live="polite">
          <div class="quiz-area">
            <div class="question" id="questionText">ржкрзНрж░рж╢рзНржи рж▓рзЛржб рж╣ржЪрзНржЫрзЗ...</div>
            <div class="options" id="optionsArea"></div>
            <div id="explainBox" class="explain hidden"></div>
            <div class="progress"><i id="progressBar"></i></div>
            <div class="controls">
              <div style="display:flex;gap:10px;align-items:center">
                <div class="score" id="scoreBox">Score: 0</div>
                <div class="small" id="qCount">ржкрзНрж░рж╢рзНржи 0 / 0</div>
                <div class="small" id="timerBox">тП▒ 0s</div>
              </div>
              <div>
                <button class="btn ghost" onclick="abortQuiz()">Abort</button>
                <button class="btn secondary" id="nextBtn" onclick="onNext()">Next тЮЬ</button>
              </div>
            </div>
          </div>
        </section>

        <!-- result -->
        <section class="card hidden" id="resultCard">
          <div class="title">ржлрж▓рж╛ржлрж▓</div>
          <div class="small" id="finalText"></div>

          <div style="margin-top:10px">
            <input id="playerName" class="input" placeholder="рждрзЛржорж╛рж░ ржирж╛ржо (leaderboard)"/>
            <div style="display:flex;gap:8px;margin-top:8px">
              <button class="btn secondary" onclick="saveScore()">Save Score</button>
              <button class="btn ghost" onclick="restart()">Try Again</button>
              <button class="btn" onclick="generateShareCard()">Share Result (Image)</button>
            </div>
          </div>

          <div style="margin-top:14px">
            <div class="title" style="font-size:16px">ЁЯПЖ Leaderboard (Top 10)</div>
            <div class="leaderboard" style="margin-top:8px">
              <ul id="leaderList"></ul>
            </div>
          </div>
        </section>
      </main>

      <!-- side -->
      <aside class="side">
        <div class="card">
          <div class="title">Quick Leader</div>
          <div class="small" id="miniLeader">Leaderboard empty</div>
        </div>

        <div class="card">
          <div class="title">Lesson Info</div>
          <div class="small" id="lessonInfo">тАФ</div>
        </div>

        <div class="card">
          <div class="title">Controls</div>
          <div class="small">Clear leaderboard / Export</div>
          <div style="display:flex;gap:8px;margin-top:8px">
            <button class="btn ghost" onclick="clearLeaderboard()">Clear LB</button>
            <button class="btn ghost" onclick="exportData()">Export LB</button>
          </div>
        </div>
      </aside>
    </div>

    <div class="footer">ExamBangla тАв Developed by Md Tishan (Class 8) тАв Data stored locally</div>
  </div>

<script>
/* ============================
   DATA: Lessons & Questions
   - Class 8 BGS (Bangladesh & World Studies) - your provided 40 Qs inserted.
   - Other classes/subjects contain sample questions.
   ============================ */

/* LESSONS per class & subject */
const LESSONS = {
  6: { BGS:["Basic BGS"], Science:["Basic Science"], Bangla:["Bangla"], English:["English"] },
  7: { BGS:["Basic BGS"], Science:["Basic Science"], Bangla:["Bangla"], English:["English"] },
  8: { BGS:["ржФржкржирж┐ржмрзЗрж╢рж┐ржХ ржпрзБржЧ ржУ ржмрж╛ржВрж▓рж╛рж░ рж╕рзНржмрж╛ржзрзАржирждрж╛ (1757-1858)","ржФржкржирж┐ржмрзЗрж╢рж┐ржХ ржкрзНрж░рж╢рж╛рж╕ржи ржУ рж╕рж╛ржорж╛ржЬрж┐ржХ ржкрж░рж┐ржмрж░рзНрждржи","ржорзБржХрзНрждрж┐ ржЖржирзНржжрзЛрж▓ржи ржУ ржЬрж╛рждрзАржпрж╝рждрж╛ржмрж╛ржжрзА ржЙржирзНржорзЗрж╖","ржРрждрж┐рж╣рж╛рж╕рж┐ржХ ржУ ржкрзНрж░рж╛рж╕ржЩрзНржЧрж┐ржХ рждржерзНржп"], Science:["ржорж╣рж╛ржХрж╛рж╢","ржкрзНрж░рж╛ржХрзГрждрж┐ржХ ржЧрзНрж░рж╣"], Bangla:["Bangla"], English:["English"] },
  9: { BGS:["BGS 1"], Science:["Science 1"], Bangla:["Bangla"], English:["English"] }
};

/* BANK: class -> subject -> lesson -> array of q objects {q,opts,ans,explain} */
/* Inserting the 40 BGS Qs you provided (organized into 4 lesson groups as above) */
const BANK = {
  6: {
    BGS: { "Basic BGS":[
      {q:"ржмрж╛ржВрж▓рж╛рзЯ ржФржкржирж┐ржмрзЗрж╢рж┐ржХ рж╢рж╛рж╕ржиржХрж╛рж▓ ржХржд рж╕рж╛рж▓ ржерзЗржХрзЗ рж╢рзБрж░рзБ рж╣рзЯ?", opts:["рззрзорзлрзн","рззрзнрзлрзн","рззрзмрзжрзж","рззрзорзлрзо"], ans:"рззрзнрзлрзн", explain:"ржРрждрж┐рж╣рж╛рж╕рж┐ржХржнрж╛ржмрзЗ ржкрж▓рж╛рж╢рзАрж░ ржпрзБржжрзНржзрзЗ (рззрзнрзлрзн) ржмрзНрж░рж┐ржЯрж┐рж╢ ржкрзНрж░ржнрж╛ржм ржмрзГржжрзНржзрж┐ ржкрж╛рзЯред"}
    ]},
    Science: {"Basic Science":[ {q:"ржкрж╛ржирж┐рж░ рж╕рзНржерж┐рж░ ржмрж░ржл ржХрзЛржи рждрж╛ржкржорж╛рждрзНрж░рж╛рзЯ рж╣рзЯ?", opts:["0┬░C","100┬░C","-10┬░C","50┬░C"], ans:"0┬░C", explain:"ржЬрж▓рзЗрж░ ржлрзНрж░рж┐ржЬрж┐ржВ ржкрзЯрзЗржирзНржЯ 0┬░Cред"} ]},
    Bangla: {"Bangla":[ {q:"ржмрж╛ржВрж▓рж╛рзЯ 'ржмржЗ' рж╢ржмрзНржжрзЗрж░ ржмрж┐ржкрж░рзАржд ржХрзА? (ржЙржжрж╛рж╣рж░ржг)", opts:["ржЦрж╛рждрж╛","ржХрж▓ржо","ржХрж╛ржЧржЬ","ржкрж╛ржЦрж┐"], ans:"ржЦрж╛рждрж╛", explain:"ржЙржжрж╛рж╣рж░ржг рж╕рзНржмрж░рзВржкред"} ]},
    English: {"English":[ {q:"Plural of 'book'?", opts:["books","bookes","bok","bookies"], ans:"books", explain:"Plural is books."} ]}
  },

  7: {
    BGS: {"Basic BGS":[ {q:"ржмрж╛ржВрж▓рж╛рж░ ржкрзНрж░ржержо ржнрж╛рж░рждрзАрзЯ рж░рж╛рж╖рзНржЯрзНрж░ ржХрзЛржиржЯрж┐ ржЫрж┐рж▓ ржирж╛?", opts:["ржкрж╛ржВрж╢рзА","ржмрж┐ржВрж╢рждржХ","ржЙрждрзНрждрж░","ржЙрждрзНржд ржкрзЗржи"], ans:"ржкрж╛ржВрж╢рзА", explain:"--"} ]},
    Science: {"Basic Science":[ {q:"ржмрж╛ржпрж╝рзБрж░ ржкрзНрж░ржзрж╛ржи ржЧрзНржпрж╛рж╕ ржХрзЛржиржЯрж┐?", opts:["ржЕржХрзНрж╕рж┐ржЬрзЗржи","ржирж╛ржЗржЯрзНрж░рзЛржЬрзЗржи","CO2","рж╣рж╛ржЗржбрзНрж░рзЛржЬрзЗржи"], ans:"ржирж╛ржЗржЯрзНрж░рзЛржЬрзЗржи", explain:"ржмрж╛рзЯрзБрж░ ржорзЛржЯрж╛ржорзБржЯрж┐ рзнрзо% ржирж╛ржЗржЯрзНрж░рзЛржЬрзЗржиред"} ]},
    Bangla: {"Bangla":[ {q:"ржмрж╛ржВрж▓рж╛рж░ ржмрж░рзНржгржорж╛рж▓рж╛рзЯ рж╕рзНржмрж░ржмрж░рзНржг ржХрзЯржЯрж┐?", opts:["рззрзз","рзп","рзн","рззрзж"], ans:"рззрзз", explain:"ржмрж╛ржВрж▓рж╛рзЯ рззрззржЯрж┐ рж╕рзНржмрж░ржмрж░рзНржгред"} ]},
    English: {"English":[ {q:"Which is a noun?", opts:["Run","Beautiful","School","Quickly"], ans:"School", explain:"School is a noun."} ]}
  },

  8: {
    BGS: {
      "ржФржкржирж┐ржмрзЗрж╢рж┐ржХ ржпрзБржЧ ржУ ржмрж╛ржВрж▓рж╛рж░ рж╕рзНржмрж╛ржзрзАржирждрж╛ (1757-1858)": [
        {q:"ржмрж╛ржВрж▓рж╛ржпрж╝ ржФржкржирж┐ржмрзЗрж╢рж┐ржХ рж╢рж╛рж╕ржиржХрж╛рж▓ ржХржд рж╕рж╛рж▓ ржерзЗржХрзЗ рж╢рзБрж░рзБ рж╣ржпрж╝?", opts:["рззрзорзлрзн рж╕рж╛рж▓","рззрзнрзлрзн рж╕рж╛рж▓","рззрзмрзжрзж рж╕рж╛рж▓","рззрзорзлрзо рж╕рж╛рж▓"], ans:"рззрзнрзлрзн рж╕рж╛рж▓", explain:"ржкрж▓рж╛рж╢рзАрж░ ржпрзБржжрзНржз (рззрзнрзлрзн) ржЕржЩрзНржЧ рж╣рж┐рж╕рзЗржмрзЗ ржмрзНрж░рж┐ржЯрж┐рж╢ ржкрзНрж░ржнрж╛ржм рж╢рж┐рж▓рзНржкрж░рзВржкрзЗ ржжрзГрж╢рзНржпржорж╛ржи рж╣рзЯред"},
        {q:"ржХрзЛржи ржпрзБржжрзНржзрзЗрж░ ржкрж░ ржмрж╛ржВрж▓рж╛рзЯ ржмрзНрж░рж┐ржЯрж┐рж╢ ржЗрж╕рзНржЯ ржЗржирзНржбрж┐ржпрж╝рж╛ ржХрзЛржорзНржкрж╛ржирж┐рж░ рж╢рж╛рж╕ржи ржкрзНрж░рждрж┐рж╖рзНржарж┐ржд рж╣рзЯ?", opts:["ржмржХрзНрж╕рж╛рж░рзЗрж░ ржпрзБржжрзНржз","ржкрж╛ржирж┐ржкржерзЗрж░ рждрзГрждрзАржпрж╝ ржпрзБржжрзНржз","ржкрж▓рж╛рж╢рзАрж░ ржпрзБржжрзНржз","ржЯрж┐ржкрзБ_sult├бnрзЗрж░ ржпрзБржжрзНржз"], ans:"ржкрж▓рж╛рж╢рзАрж░ ржпрзБржжрзНржз", explain:"ржкрж▓рж╛рж╢рзАрж░ ржпрзБржжрзНржзрзЗ (рззрзнрзлрзн) ржХрзЛржорзНржкрж╛ржирж┐рж░ ржирж┐ржпрж╝ржирзНрждрзНрж░ржг ржмрж╛ржбрж╝рзЗред"},
        {q:"ржкрж▓рж╛рж╢рзАрж░ ржпрзБржжрзНржз ржХржд рж╕рж╛рж▓рзЗ рж╕ржВржШржЯрж┐ржд рж╣рзЯ?", opts:["рззрзнрзлрзм","рззрзнрзмрзк","рззрзнрзлрзн","рззрзорзжрзж"], ans:"рззрзнрзлрзн", explain:"ржЗрждрж┐рж╣рж╛рж╕рж┐ржХржнрж╛ржмрзЗ рззрзнрзлрзн рж╕рж╛рж▓рзЗ рж╕ржВржШржЯрж┐рждред"},
        {q:"рж╕рж┐рж░рж╛ржЬржЙржжрзНржжрзМрж▓рж╛ ржХржд ржмржпрж╝рж╕рзЗ ржмрж╛ржВрж▓рж╛-ржмрж┐рж╣рж╛рж░-ржЙрзЬрж┐рж╖рзНржпрж╛рж░ рж╕рж┐ржВрж╣рж╛рж╕ржирзЗ ржмрж╕рзЗржи?", opts:["рзирзж","рзирзи","рзирзл","рзйрзж"], ans:"рзирзи", explain:"рж╕рж┐рж░рж╛ржЬржЙржжрзНржжрзМрж▓рж╛ ~рзирзи ржмржЫрж░ ржмржпрж╝рж╕рзЗ рж╢рж╛рж╕ржиржнрж╛рж░ ржЧрзНрж░рж╣ржг ржХрж░рзЗржиред"},
        {q:"ржиржмрж╛ржм рж╕рж┐рж░рж╛ржЬржЙржжрзНржжрзМрж▓рж╛рж░ ржкрждржирзЗрж░ ржкрж░ ржХрзЗ ржмрж╛ржВрж▓рж╛рж░ ржиржмрж╛ржм рж╣ржи?", opts:["ржорзАрж░ ржХрж╛рж╕рж┐ржо","ржорзАрж░ ржЬрж╛ржлрж░","ржХрзНрж▓рж╛ржЗржн","ржЖрж▓рж┐ржмрж░рзНржжрж┐ ржЦрж╛ржБ"], ans:"ржорзАрж░ ржЬрж╛ржлрж░", explain:"ржорзАрж░ ржЬрж╛ржлрж░ржХрзЗ ржиржмрж╛ржм рж╣рж┐рж╕рзЗржмрзЗ ржкрзНрж░рждрж┐рж╖рзНржарж╛ ржХрж░рж╛ рж╣рзЯред"},
        {q:"ржЗрж╕рзНржЯ ржЗржирзНржбрж┐рзЯрж╛ ржХрзЛржорзНржкрж╛ржирж┐ржХрзЗ ржмрж╛ржгрж┐ржЬрзНржпрзЗрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ ржмрж┐рж╢рзЗрж╖ рж╕рзБржмрж┐ржзрж╛ ржжрзЗржУржпрж╝рж╛рж░ ржкрзНрж░ржзрж╛ржи ржХрж╛рж░ржг ржХрзА ржЫрж┐рж▓?", opts:["ржмрж╛ржЩрж╛рж▓рж┐ ржкржгрзНржпрзЗрж░ ржЪрж╛рж╣рж┐ржжрж╛","ржмрзНрж░рж┐ржЯрж┐рж╢ ржкрзНрж░рж╢рж╛рж╕ржирж┐ржХ ржХрзНрж╖ржорждрж╛ ржмрзГржжрзНржзрж┐","ржиржмрж╛ржмрзЗрж░ ржжрж░ржмрж╛рж░рзЗ рж╖ржбрж╝ржпржирзНрждрзНрж░","ржЗржЙрж░рзЛржкрзАрзЯ ржмржгрж┐ржХржжрзЗрж░ ржЖржЧржоржи"], ans:"ржиржмрж╛ржмрзЗрж░ ржжрж░ржмрж╛рж░рзЗ рж╖ржбрж╝ржпржирзНрждрзНрж░", explain:"ржиржмрж╛ржмрзЗрж░ ржжрзБрж░рзНржмрж▓рждрж╛ ржУ рж╖рзЬржпржирзНрждрзНрж░ ржХрзЛржорзНржкрж╛ржирж┐рж░ рж╕рзБржмрж┐ржзрж╛ ржжрзЗржпрж╝ред"},
        {q:"ржмрж╛ржВрж▓рж╛ржпрж╝ ржЗржЙрж░рзЛржкрзАржпрж╝ ржмржгрж┐ржХржжрзЗрж░ ржоржзрзНржпрзЗ ржмрж╛ржгрж┐ржЬрзНржпрзЗрж░ ржЬржирзНржп ржкрзНрж░ржержо ржХрж╛рж░рж╛ ржЖрж╕рзЗржи?", opts:["ржУрж▓ржирзНржжрж╛ржЬ","ржкрж░рзНрждрзБржЧрж┐ржЬ","ржлрж░рж╛рж╕рж┐","ржЗржВрж░рзЗржЬ"], ans:"ржкрж░рзНрждрзБржЧрж┐ржЬ", explain:"ржкрж░рзНрждрзБржЧрж┐ржЬржЗ ржкрзНрж░ржержо ржмржЩрзНржЧ ржЙржкржХрзВрж▓рзЗ ржмрж╛ржгрж┐ржЬрзНржп рж╢рзБрж░рзБ ржХрж░рзЗред"},
        {q:"ржЫрж┐рзЯрж╛рждрзНрждрж░рзЗрж░ ржоржирзНржмржирзНрждрж░ ржХржд рж╕рж╛рж▓рзЗ рж╣рзЯрзЗржЫрж┐рж▓?", opts:["рззрзнрзлрзн","рззрзнрзнрзж","рззрзнрзмрзл","рззрзнрзпрзй"], ans:"рззрзнрзнрзж", explain:"рззрзнрзнрзж рж╕рж╛рж▓рзЗрж░ ржжрзБрж░рзНржнрж┐ржХрзНрж╖ ржЫрж┐рзЯрж╛рждрзНрждрж░рзЗрж░ ржирж╛ржорзЗржУ ржкрж░рж┐ржЪрж┐рждред"},
        {q:"ржмрж╛ржВрж▓рж╛ржпрж╝ ржжрзНржмрзИржд рж╢рж╛рж╕ржи ржХрзЗ ржкрзНрж░ржмрж░рзНрждржи ржХрж░рзЗржи?", opts:["рж▓рж░рзНржб ржХрзНрж▓рж╛ржЗржн","ржУрзЯрж╛рж░рзЗржи рж╣рзЗрж╕рзНржЯрж┐ржВрж╕","рж▓рж░рзНржб ржХрж░рзНржиржУржпрж╝рж╛рж▓рж┐рж╕","рж▓рж░рзНржб ржмрзЗржирзНржЯрж┐ржЩрзНржХ"], ans:"рж▓рж░рзНржб ржХрзНрж▓рж╛ржЗржн", explain:"рж▓рж░рзНржб ржХрзНрж▓рж╛ржЗржнрзЗрж░ ржирзАрждрж┐рждрзЗ ржжрзНржмрзИржд рж╢рж╛рж╕ржи ржжрзЗржЦрж╛ ржпрж╛ржпрж╝ред"},
        {q:"ржмрж╛ржВрж▓рж╛рж░ рж╢рж╛рж╕ржи ржХрзНрж╖ржорждрж╛ ржЗржВрж░рзЗржЬржжрзЗрж░ рж╣рж╛рждрзЗ ржпрж╛ржУржпрж╝рж╛рж░ ржкрзНрж░ржзрж╛ржи ржХрж╛рж░ржгржЧрзБрж▓рж┐рж░ ржоржзрзНржпрзЗ ржХрзЛржиржЯрж┐ ржЫрж┐рж▓?", opts:["ржЗржВрж░рзЗржЬржжрзЗрж░ рж╕рж╛ржорж░рж┐ржХ ржжрзБрж░рзНржмрж▓рждрж╛","ржЗржЙрж░рзЛржкрзАрзЯ ржмржгрж┐ржХржжрзЗрж░ ржкрзНрж░рждрж┐ржпрзЛржЧрж┐рждрж╛","ржиржмрж╛ржмрзЗрж░ ржжрзВрж░ржжрж░рзНрж╢рж┐рждрж╛рж░ ржЕржнрж╛ржм ржУ рж╖рзЬржпржирзНрждрзНрж░","ржЫрж┐рзЯрж╛рждрзНрждрж░рзЗрж░ ржоржирзНржмржирзНрждрж░"], ans:"ржиржмрж╛ржмрзЗрж░ ржжрзВрж░ржжрж░рзНрж╢рж┐рждрж╛рж░ ржЕржнрж╛ржм ржУ рж╖рзЬржпржирзНрждрзНрж░", explain:"ржиржмрж╛ржмрзЗрж░ ржнрзЗрждрж░рзЗрж░ ржжрзБрж░рзНржмрж▓рждрж╛ ржУ рж╖рзЬржпржирзНрждрзНрж░ ржкрзНрж░ржзрж╛ржи ржнрзВржорж┐ржХрж╛ ржкрж╛рж▓ржи ржХрж░рзЗред"}
      ],
      "ржФржкржирж┐ржмрзЗрж╢рж┐ржХ ржкрзНрж░рж╢рж╛рж╕ржи ржУ рж╕рж╛ржорж╛ржЬрж┐ржХ ржкрж░рж┐ржмрж░рзНрждржи": [
        {q:"ржЗрж╕рзНржЯ ржЗржирзНржбрж┐рзЯрж╛ ржХрзЛржорзНржкрж╛ржирж┐рж░ ржкрзНрж░ржзрж╛ржи ржХрж╛ржЬ ржХрзА ржЫрж┐рж▓?", opts:["ржкрзНрж░рж╢рж╛рж╕ржи","рж╢рж┐ржХрзНрж╖рж╛","рж▓ржмржг ржУ ржмрж╕рзНрждрзНрж░ ржмрзНржпржмрж╕рж╛","ржХрзГрж╖рж┐"], ans:"рж▓ржмржг ржУ ржмрж╕рзНрждрзНрж░ ржмрзНржпржмрж╕рж╛", explain:"ржкрзНрж░рж╛ржержорж┐ржХ ржЙржжрзНржжрзЗрж╢рзНржп ржЫрж┐рж▓ ржмрж╛ржгрж┐ржЬрзНржп, ржмрж┐рж╢рзЗрж╖ржд рж▓ржмржг ржУ ржмрж╕рзНрждрзНрж░ред"},
        {q:"рззрзнрзпрзй рж╕рж╛рж▓рзЗ ржЪрж┐рж░рж╕рзНржерж╛ржпрж╝рзА ржмржирзНржжрзЛржмрж╕рзНрждрзЗрж░ ржлрж▓рзЗ ржХрж┐ рж╢рзНрж░рзЗржгрзА рждрзИрж░рж┐ рж╣рзЯ?", opts:["ржХрзГрж╖ржХ","ржЬржорж┐ржжрж╛рж░","рж╢рзНрж░ржорж┐ржХ","ржХрж╛рж░рж┐ржЧрж░"], ans:"ржЬржорж┐ржжрж╛рж░", explain:"ржЪрж┐рж░рж╕рзНржерж╛ржпрж╝рзА ржмржирзНржжрзЛржмрж╕рзНржд ржЬржорж┐ржжрж╛рж░ рж╢рзНрж░рзЗржгрзАрж░ ржмрж┐ржХрж╛рж╢ ржШржЯрж╛рзЯред"},
        {q:"ржХрзЛржи ржЧржнрж░рзНржирж░ ржЬрзЗржирж╛рж░рзЗрж▓рзЗрж░ рж╕ржоржпрж╝рзЗ ржЗрж╕рзНржЯ ржЗржирзНржбрж┐ржпрж╝рж╛ ржХрзЛржорзНржкрж╛ржирж┐ ржкрзВрж░рзНржг ржХрзНрж╖ржорждрж╛ рж▓рж╛ржн ржХрж░рзЗ?", opts:["рж▓рж░рзНржб ржХрзНрж▓рж╛ржЗржн","ржУрзЯрж╛рж░рзЗржи рж╣рзЗрж╕рзНржЯрж┐ржВрж╕","рж▓рж░рзНржб ржмрзЗржирзНржЯрж┐ржЩрзНржХ","рж▓рж░рзНржб ржбрж╛рж▓рж╣рзМрж╕рж┐"], ans:"ржУрзЯрж╛рж░рзЗржи рж╣рзЗрж╕рзНржЯрж┐ржВрж╕", explain:"ржУрзЯрж░рзЗржи рж╣рзЗрж╕рзНржЯрж┐ржВрж╕рзЗрж░ ржЖржорж▓рзЗ ржХрзЛржорзНржкрж╛ржирж┐ ржкрж░рж┐ржЪрж╛рж▓ржи ржХрзНрж╖ржорждрж╛рзЯ ржЖрж╕рзЗред"},
        {q:"ржЪрж┐рж░рж╕рзНржерж╛рзЯрзА ржмржирзНржжрзЛржмрж╕рзНржд ржХрзЗ ржкрзНрж░ржмрж░рзНрждржи ржХрж░рзЗржи?", opts:["ржУрзЯрж╛рж░рзЗржи рж╣рзЗрж╕рзНржЯрж┐ржВрж╕","рж▓рж░рзНржб ржУрзЯрзЗрж▓рзЗрж╕рж▓рж┐","рж▓рж░рзНржб ржХрж░рзНржиржУрзЯрж╛рж▓рж┐рж╕","рж▓рж░рзНржб ржбрж╛рж▓рж╣рзМрж╕рж┐"], ans:"рж▓рж░рзНржб ржХрж░рзНржиржУрзЯрж╛рж▓рж┐рж╕", explain:"ржЪрж┐рж░рж╕рзНржерж╛рзЯрзА ржмржирзНржжрзЛржмрж╕рзНрждрзЗрж░ ржирзАрждрж┐ ржХрж░рзНржиржУрзЯрж╛рж▓рж┐рж╕рзЗрж░ ржЖржорж▓рзЗ ржкрзНрж░ржмрж░рзНрждрж┐рждред"},
        {q:"ржЗржВрж░рзЗржЬрж░рж╛ ржХрж▓ржХрж╛рждрж╛ ржорж╛ржжрзНрж░рж╛рж╕рж╛ рж╕рзНржерж╛ржкржи ржХрж░рзЗ ржХржд рж╕рж╛рж▓рзЗ?", opts:["рззрзорзлрзн","рззрзорзкрзл","рззрзнрзорзз","рззрзпрзжрзл"], ans:"рззрзнрзорзз", explain:"рззрзнрзорзз рж╕рж╛рж▓рзЗ ржХрж▓ржХрж╛рждрж╛ржпрж╝ ржкрзНрж░рждрж┐рж╖рзНржарж╛ржи ржЧржбрж╝рзЗ ржУржарзЗред"},
        {q:"ржХрзЛржиржЯрж┐ ржЖржзрзБржирж┐ржХ рж╢рж┐ржХрзНрж╖рж╛ржХрзЗржирзНржжрзНрж░ рж╣рж┐рж╕рзЗржмрзЗ ржкрзНрж░рждрж┐рж╖рзНржарж╛ рж▓рж╛ржн ржХрж░рзЗ?", opts:["ржЪржЯрзНржЯржЧрзНрж░рж╛ржо ржХрж▓рзЗржЬ","ржврж╛ржХрж╛ ржмрж┐рж╢рзНржмржмрж┐ржжрзНржпрж╛рж▓ржпрж╝","ржкрзНрж░рзЗрж╕рж┐ржбрзЗржирзНрж╕рж┐ ржХрж▓рзЗржЬ","ржХрж▓ржХрж╛рждрж╛ ржмрж┐рж╢рзНржмржмрж┐ржжрзНржпрж╛рж▓ржпрж╝"], ans:"ржХрж▓ржХрж╛рждрж╛ ржмрж┐рж╢рзНржмржмрж┐ржжрзНржпрж╛рж▓ржпрж╝", explain:"ржХрж▓ржХрж╛рждрж╛ ржмрж┐рж╢рзНржмржмрж┐ржжрзНржпрж╛рж▓ржпрж╝ ржЖржзрзБржирж┐ржХ рж╢рж┐ржХрзНрж╖рж╛рж░ ржХрзЗржирзНржжрзНрж░ рж╣рж┐рж╕рзЗржмрзЗ ржкрж░рж┐ржЪрж┐рждред"},
        {q:"рззрзорзлрзн рж╕рж┐ржкрж╛рж╣рзА ржмрж┐ржжрзНрж░рзЛрж╣рзЗрж░ ржкрзНрж░ржзрж╛ржи ржХрж╛рж░ржг ржХрж┐ ржЫрж┐рж▓?", opts:["ржХрзЛржорзНржкрж╛ржирж┐рж░ ржмрзНржпрж░рзНржерждрж╛","ржЗржЙрж░рзЛржкрзАрзЯ ржЖржЧржоржи","ржЬржиржЧржгрзЗрж░ ржЕрж╕ржирзНрждрзЛрж╖","рж╢рж┐ржХрзНрж╖рж╛ ржЕржмржирждрж┐"], ans:"ржЬржиржЧржгрзЗрж░ ржЕрж╕ржирзНрждрзЛрж╖", explain:"рж╕рж┐ржкрж╛рж╣рзА ржмрж┐ржжрзНрж░рзЛрж╣ ржмрзНрж░рж┐ржЯрж┐рж╢ рж╢рж╛рж╕ржирзЗрж░ ржЕрж╕ржирзНрждрзЛрж╖рзЗрж░ ржлрж▓ред"},
        {q:"рж╕рж┐ржкрж╛рж╣рзА ржмрж┐ржжрзНрж░рзЛрж╣рзЗрж░ ржкрж░ рззрзорзлрзо рж╕рж╛рж▓рзЗ ржХрзЛржи ржЖржЗржирзЗ ржХрзЛржорзНржкрж╛ржирж┐рж░ рж╢рж╛рж╕ржи рж╢рзЗрж╖ рж╣рзЯ?", opts:["рж░рзЗржЧрзБрж▓рзЗржЯрж┐ржВ ржЕрзНржпрж╛ржХрзНржЯ","ржнрж╛рж░ржд рж╢рж╛рж╕ржи ржЖржЗржи","ржЪрж┐рж░рж╕рзНржерж╛ржпрж╝рзА ржмржирзНржжрзЛржмрж╕рзНржд","ржорж░рзНрж▓рзЗ-ржорж┐ржирзНржЯрзЛ"], ans:"ржнрж╛рж░ржд рж╢рж╛рж╕ржи ржЖржЗржи", explain:"ржнрж╛рж░ржд рж╢рж╛рж╕ржи ржЖржЗржи (1858) ржХрзЛржорзНржкрж╛ржирж┐рж░ рж╢рж╛рж╕ржи рж╢рзЗрж╖ ржХрж░рзЗред"},
        {q:"ржмрзНрж░рж┐ржЯрж┐рж╢ рж╢рж╛рж╕ржиржХрж╛рж▓рзЗ ржХрж╛рж░ ржЖржорж▓рзЗ ржирзАрж▓ ржмрж┐ржжрзНрж░рзЛрж╣ рж╕ржВржШржЯрж┐ржд рж╣ржпрж╝?", opts:["рж▓рж░рзНржб ржбрж╛рж▓рж╣рзМрж╕рж┐","рж▓рж░рзНржб ржХрзНржпрж╛ржирж┐ржВ","рж▓рж░рзНржб ржХрж╛рж░рзНржЬржи","рж▓рж░рзНржб рж░рж┐ржкржи"], ans:"рж▓рж░рзНржб ржХрзНржпрж╛ржирж┐ржВ", explain:"ржирзАрж▓ ржмрж┐ржжрзНрж░рзЛрж╣ ржХрзНржпрж╛ржирж┐ржВ ржЖржорж▓рзЗ рж╕ржВржШржЯрж┐рждред"},
        {q:"ржмрзНрж░рж┐ржЯрж┐рж╢ рж╢рж╛рж╕ржирзЗрж░ ржЕржмрж╕рж╛ржи рж╣рзЯ ржХрзЛржи рж╕рж╛рж▓рзЗ?", opts:["рззрзпрзжрзл","рззрзпрзкрзн","рззрзпрззрзо","рззрзпрзкрзж"], ans:"рззрзпрзкрзн", explain:"рззрзпрзкрзн рж╕рж╛рж▓рзЗ ржмрзНрж░рж┐ржЯрж┐рж╢ рж╢рж╛рж╕ржи ржЕржмрж╕рж╛ржи ржУ рж╕рзНржмрж╛ржзрзАржирждрж╛ рж▓рж╛ржнред"}
      ],
      "ржорзБржХрзНрждрж┐ ржЖржирзНржжрзЛрж▓ржи ржУ ржЬрж╛рждрзАржпрж╝рждрж╛ржмрж╛ржжрзЗрж░ ржЙржирзНржорзЗрж╖": [
        {q:"ржХржВржЧрзНрж░рзЗрж╕ ржУ ржорзБрж╕рж▓рж┐ржо рж▓рзАржЧ ржРржХрзНржпржмржжрзНржз рж╣рзЯрзЗ ржХржмрзЗ рззрзпрзжрзм рж╕рж╛рж▓рзЗрж░ ржкрзНрж░рж╕рзНрждрж╛ржм ржЙржкрж╕рзНржерж╛ржкржи ржХрж░рзЗ?", opts:["рззрзпрззрзж","рззрзпрззрзм","рззрзпрзирзл","рззрзпрзйрзй"], ans:"рззрзпрззрзм", explain:"рззрзпрззрзм рж╕рж╛рж▓рзЗ ржРржХрзНржп ржУ ржкрзНрж░рж╕рзНрждрж╛ржм рж▓рж┐ржкрж┐ржмржжрзНржзред"},
        {q:"ржмрж╛ржЩрж╛рж▓рж┐рж░ ржкрзНрж░ржержо ржорзБрж╕рж▓рж┐ржо рж╢рж╛рж╕ржХ ржХрзЗ ржЫрж┐рж▓рзЗржи (ржжрж┐рж▓рзНрж▓рж┐рждрзЗ ржнрж┐рждрзНрждрж┐ рж╕рзНржерж╛ржкржи)?", opts:["ржмржЦрждрж┐рзЯрж╛рж░ ржЦрж▓ржЬрж┐","ржЗрж▓рж┐рзЯрж╛рж╕ рж╢рж╛рж╣","рж╕рж┐рж░рж╛ржЬржЙржжрзНржжрзМрж▓рж╛","ржорзАрж░ ржЬрж╛ржлрж░"], ans:"ржмржЦрждрж┐рзЯрж╛рж░ ржЦрж▓ржЬрж┐", explain:"ржмржЦрждрж┐рзЯрж╛рж░ ржЦрж▓ржЬрж┐ ржжрж┐рж▓рзНрж▓рж┐рждрзЗ рж╢рж╛рж╕ржи ржкрзНрж░рждрж┐рж╖рзНржарж╛ ржХрж░рзЗржиред"},
        {q:"ржиржмрж╛ржм ржЖрж▓рж┐ржмрж░рзНржжрж┐ ржЦрж╛ржБрж░ ржорзГрждрзНржпрзБрж░ ржкрж░ ржХрзЗ ржиржмрж╛ржм рж╣ржи?", opts:["ржорзАрж░ ржЬрж╛ржлрж░","рж╕рж┐рж░рж╛ржЬржЙржжрзНржжрзМрж▓рж╛","ржорзАрж░ ржХрж╛рж╕рж┐ржо","рж╢рзБржЬрж╛ржЙржжрзНржжрзМрж▓рж╛"], ans:"рж╕рж┐рж░рж╛ржЬржЙржжрзНржжрзМрж▓рж╛", explain:"рж╕рж┐рж░рж╛ржЬржЙржжрзНржжoula ржиржмрж╛ржм рж╣ржиред"},
        {q:"ржЗрж╕рзНржЯ ржЗржирзНржбрж┐рзЯрж╛ ржХрзЛржорзНржкрж╛ржирж┐рж░ ржкрзНрж░ржержо ржкрзНрж░ржзрж╛ржи ржмрж╛ржгрж┐ржЬрзНржпрж┐ржХ ржЙржжрзНржжрзЗрж╢рзНржп ржХрж┐ ржЫрж┐рж▓?", opts:["рж╕рж╛ржорж░рж┐ржХ ржШрж╛ржБржЯрж┐","рж▓ржмржг ржУ ржХрж╛ржкрзЬ","ржкрзНрж░рж╢рж╛рж╕ржи","ржЬржорж┐ржжрж╛рж░рж┐"], ans:"рж▓ржмржг ржУ ржХрж╛ржкрзЬ", explain:"ржмрж╛ржгрж┐ржЬрзНржпрж┐ржХ ржЙржжрзНржжрзЗрж╢рзНржп ржЫрж┐рж▓ рж▓ржмржг ржУ ржХрж╛ржкрзЬред"},
        {q:"ржХрж▓ржХрж╛рждрж╛ ржХрзЗржирзНржжрзНрж░рж┐ржХ ржмрж╛ржЩрж╛рж▓рж┐ ржЬрж╛рждрзАрзЯрждрж╛ржмрж╛ржжрзЗрж░ ржЙржирзНржорзЗрж╖ ржХржмрзЗ?", opts:["рззрзорзмрзж ржжрж╢ржХ","рззрзорзпрзж ржжрж╢ржХ","рззрзпрзжрзж ржжрж╢ржХ","рззрзпрзйрзж ржжрж╢ржХ"], ans:"рззрзорзмрзж ржжрж╢ржХ", explain:"рззрзорзм0-ржПрж░ ржжрж╢ржХрзЗ ржмрж╛ржЩрж╛рж▓рж┐ ржЬрж╛рждрзАржпрж╝рждрж╛ржмрж╛ржж рж╢рзБрж░рзБ рж▓ржХрзНрж╖рзНржп ржХрж░рж╛ ржпрж╛рзЯред"},
        {q:"ржнрж╛рж░рждржмрж░рзНрж╖рзЗ ржмрзНрж░рж┐ржЯрж┐рж╢ рж╢рж╛рж╕ржи рж╕рж░рж╛рж╕рж░рж┐ рж╢рзБрж░рзБ рж╣рзЯ ржХрзЛржи рж╕рж╛рж▓рзЗ?", opts:["рззрзнрзлрзн","рззрзорзлрзн","рззрзорзлрзо","рззрзпрзжрзл"], ans:"рззрзорзлрзо", explain:"рж╕рж┐ржкрж╛рж╣рзА ржмрж┐ржжрзНрж░рзЛрж╣ ржкрж░ 1858 рж╕рж╛рж▓рзЗ ржмрзНрж░рж┐ржЯрж┐рж╢ рж╕рж░ржХрж╛рж░ ржХрзНрж╖ржорждрж╛ ржирзЗрзЯред"},
        {q:"ржмрзНрж░рж┐ржЯрж┐рж╢ рж╢рж╛рж╕ржиржХрж╛рж▓рзЗ ржХрж╛рж░ ржЖржорж▓рзЗ ржЖржзрзБржирж┐ржХ рж╢рж┐ржХрзНрж╖рж╛ ржмрж┐рж╕рзНрждрж╛рж░ ржШржЯрзЗ?", opts:["рж░рж╛ржоржорзЛрж╣ржи рж░рж╛рзЯ","рж▓рж░рзНржб ржмрзЗржирзНржЯрж┐ржЩрзНржХ","ржмрж┐ржжрзНржпрж╛рж╕рж╛ржЧрж░","рж▓рж░рзНржб ржХрж░рзНржиржУрзЯрж╛рж▓рж┐рж╕"], ans:"рж▓рж░рзНржб ржмрзЗржирзНржЯрж┐ржЩрзНржХ", explain:"ржмрзЗржирзНржЯрж┐ржЩрзНржХрзЗрж░ ржЖржорж▓рзЗ рж╢рж┐ржХрзНрж╖рж╛ рж╕ржорзНржкрзНрж░рж╕рж╛рж░рж┐ржд рж╣рзЯред"},
        {q:"рззрзорзкрзй рж╕рж╛рж▓рзЗ ржкрзНрж░рждрж┐рж╖рзНржарж┐ржд ржкрзНрж░рждрж┐рж╖рзНржарж╛ржиржЯрж┐ ржХрзЛржиржЯрж┐?", opts:["ржЬржорж┐ржжрж╛рж░ рж╕ржнрж╛","ржмрзНрж░рж┐ржЯрж┐рж╢ ржЗржирзНржбрж┐рзЯрж╛ рж╕рзЛрж╕рж╛ржЗржЯрж┐","ржЬрж╛рждрзАрзЯ ржХржВржЧрзНрж░рзЗрж╕","ржорзБрж╕рж▓рж┐ржо рж▓рзАржЧ"], ans:"ржмрзНрж░рж┐ржЯрж┐рж╢ ржЗржирзНржбрж┐рзЯрж╛ рж╕рзЛрж╕рж╛ржЗржЯрж┐", explain:"ржмрзНрж░рж┐ржЯрж┐рж╢ ржЗржирзНржбрж┐рзЯрж╛ рж╕рзЛрж╕рж╛ржЗржЯрж┐ ржкрзНрж░ржержо ржкрзНрж░рждрж┐рж░рзЛржз ржкрж░рзНржпрж╛рзЯрзЗ рж╕ржХрзНрж░рж┐рзЯ рж╣рзЯред"},
        {q:"рззрзпрзкрзж рж╕рж╛рж▓рзЗрж░ рж▓рж╛рж╣рзЛрж░ ржкрзНрж░рж╕рзНрждрж╛ржмрзЗрж░ ржмрж┐рж╖рзЯ ржХрж┐ ржЫрж┐рж▓?", opts:["ржпрзБржХрзНржд ржирж┐рж░рзНржмрж╛ржЪржи","ржкрзГржержХ ржорзБрж╕рж▓рж┐ржо рж░рж╛рж╖рзНржЯрзНрж░","рж╣рж┐ржирзНржжрзБ рж╕рзНржмрж╢рж╛рж╕ржи","ржмрзНрж░рж┐ржЯрж┐рж╢ рж╕ржорж░рзНржержи"], ans:"ржкрзГржержХ ржорзБрж╕рж▓рж┐ржо рж░рж╛рж╖рзНржЯрзНрж░", explain:"рззрзпрзкрзж-рж░ рж▓рж╛рж╣рзЛрж░ ржкрзНрж░рж╕рзНрждрж╛ржмрзЗ ржЖрж▓рж╛ржжрж╛ ржорзБрж╕рж▓рж┐ржо рж░рж╛рж╖рзНржЯрзНрж░ ржжрж╛ржмрж┐ ржХрж░рж╛ рж╣рзЯред"},
        {q:"рззрзпрзкрзн рж╕рж╛рж▓рзЗ ржнрж╛рж░ржд ржмрж┐ржнржХрзНржд рж╣рж▓рзЗ ржмрж╛ржВрж▓рж╛ржУ ржХрзЯ ржкрзНрж░ржжрзЗрж╢рзЗ ржмрж┐ржнржХрзНржд рж╣рзЯ?", opts:["рзи","рзй","рзк","рзл"], ans:"рзи", explain:"ржкрзВрж░рзНржм ржУ ржкрж╢рзНржЪрж┐ржо ржмрж╛ржВрж▓рж╛рзЯ ржмрж┐ржнржХрзНржд рж╣рзЯред"}
      ],
      "ржРрждрж┐рж╣рж╛рж╕рж┐ржХ ржУ ржкрзНрж░рж╛рж╕ржЩрзНржЧрж┐ржХ рждржерзНржп": [
        {q:"ржР рж╕ржоржпрж╝ржХрж╛рж▓ржХрзЗ ржмрж╛ржВрж▓рж╛ржпрж╝ ржФржкржирж┐ржмрзЗрж╢рж┐ржХ ржпрзБржЧ ржмрж▓рж╛ рж╣ржпрж╝?", opts:["рззрзмрзжрзж-рззрзпрзжрзж","рззрзнрзлрзн-рззрзпрзкрзн","рззрзорзлрзн-рззрзпрзкрзж","рззрзнрзжрзж-рззрзорзжрзж"], ans:"рззрзнрзлрзн-рззрзпрзкрзн", explain:"ржФржкржирж┐ржмрзЗрж╢рж┐ржХ ржпрзБржЧ рж╕рж╛ржзрж╛рж░ржгржд рззрзнрзлрзн-рззрзпрзкрзн ржзрж░рж╛ рж╣рзЯред"},
        {q:"ржорзБржШрж▓ рж╕рзБржмрзЗржжрж╛рж░ ржЗрж╕рж▓рж╛ржо ржЦрж╛ржБ ржврж╛ржХрж╛ ржХрзЗ рж░рж╛ржЬржзрж╛ржирзА ржХрж░рзЗржи ржХржЦржи?", opts:["рззрзлрзжрзж","рззрзмрззрзж","рззрзмрзлрзж","рззрзнрзжрзж"], ans:"рззрзмрззрзж", explain:"рззрзмрззрзж рж╕рж╛рж▓рзЗ ржЙрж▓рзНрж▓рзЗржЦрж┐рждред"},
        {q:"ржЗржЙрж░рзЛржкрзАрзЯ ржмржгрж┐ржХржжрзЗрж░ ржоржзрзНржпрзЗ ржкрзНрж░ржержо ржЖржЧржоржи ржХрзЛржиржЯрж┐?", opts:["ржУрж▓ржирзНржжрж╛ржЬ","ржлрж░рж╛рж╕рж┐","ржЗржВрж░рзЗржЬ","ржкрж░рзНрждрзБржЧрж┐ржЬ"], ans:"ржкрж░рзНрждрзБржЧрж┐ржЬ", explain:"ржкрж░рзНрждрзБржЧрж┐ржЬ ржкрзНрж░ржержо ржмржЩрзНржЧ ржЙржкржХрзВрж▓рзЗ ржмрж╛ржгрж┐ржЬрзНржп рж╢рзБрж░рзБ ржХрж░рзЗред"},
        {q:"рззрзнрзнрзи ржерзЗржХрзЗ ржХрзЛржорзНржкрж╛ржирж┐ рж╢рж╛рж╕ржи ржХрж┐ ржорж╛ржзрзНржпржорзЗ ржЪрж╛рж▓рзБ рж╣ржд?", opts:["ржиржмрж╛ржмрзЗрж░ ржкрзНрж░рждрж┐ржирж┐ржзрж┐","ржЖржЮрзНржЪрж▓рж┐ржХ рж╢рж╛рж╕ржХ","ржЧржнрж░рзНржирж░ ржЬрзЗржирж╛рж░рзЗрж▓","ржмрзНрж░рж┐ржЯрж┐рж╢ рж░рж╛ржЬ"], ans:"ржЧржнрж░рзНржирж░ ржЬрзЗржирж╛рж░рзЗрж▓", explain:"ржЧржнрж░рзНржирж░ ржЬрзЗржирж╛рж░рзЗрж▓рзЗрж░ ржорж╛ржзрзНржпржорзЗ ржкрзНрж░рж╢рж╛рж╕ржи ржкрж░рж┐ржЪрж╛рж▓ржирж╛ рж╣рждрзЛред"},
        {q:"рззрзорззрзй рж╕рж╛рж▓рзЗрж░ рж╕ржиржж ржЖржЗржирзЗ ржХрзЛржорзНржкрж╛ржирж┐рж░ ржХрзА ржШржЯрзЗ?", opts:["ржПржХржЪрзЗржЯрж┐рзЯрж╛ рж╕рзАржорж┐ржд рж╣рзЯ","рж╕ржорзНржкрзВрж░рзНржг ржХрзНрж╖ржорждрж╛ ржпрж╛рзЯ","рж╢рж╛рж╕ржи рж╢рзЗрж╖","ржХрж▓ржХрж╛рждрж╛ ржмрж┐рж╢рзНржмржмрж┐ржжрзНржпрж╛рж▓рзЯ"], ans:"ржПржХржЪрзЗржЯрж┐рзЯрж╛ рж╕рзАржорж┐ржд рж╣рзЯ", explain:"1813-ржПрж░ рж░рзЛржЪржирж╛ ржХрзЛржорзНржкрж╛ржирж┐рж░ ржПржХржЪрзЗржЯрж┐ржпрж╝рж╛ ржмрж╛ржгрж┐ржЬрзНржп рж╕рзАржорж┐ржд ржХрж░рзЗред"},
        {q:"рззрзорзмрзж-рж░ ржжрж╢ржХрзЗ ржХрж▓ржХрж╛рждрж╛ржпрж╝ ржХрзА ржЬржирзНржо ржирзЗрзЯ?", opts:["ржзрж░рзНржорзАрзЯ ржЖрж▓рзЛржЪржирж╛","ржЬрж╛рждрзАржпрж╝рждрж╛ржмрж╛ржжрзА ржЖржирзНржжрзЛрж▓ржи","ржмрж╛ржгрж┐ржЬрзНржп ржкрзНрж░рждрж┐ржпрзЛржЧрж┐рждрж╛","ржХрзГрж╖рж┐ рж╕ржВрж╕рзНржХрж╛рж░"], ans:"ржЬрж╛рждрзАржпрж╝рждрж╛ржмрж╛ржжрзА ржЖржирзНржжрзЛрж▓ржи", explain:"рззрзорзмрзж-рж░ ржжрж╢ржХрзЗ ржЬрж╛рждрзАржпрж╝рждрж╛ржмрж╛ржжрзА ржнрж╛ржмржирж╛ ржЖржмрж┐рж░рзНржнрзВржд рж╣рзЯред"},
        {q:"ржФржкржирж┐ржмрзЗрж╢рж┐ржХ ржпрзБржЧрзЗ ржмрж╛ржВрж▓рж╛рж░ рж╕ржорзНржкржж ржирж┐ржХрж╛рж╢рж┐ ржХрзА ржирж╛ржорзЗ ржкрж░рж┐ржЪрж┐ржд?", opts:["ржжрзНржмрзИржд рж╢рж╛рж╕ржи","ржЪрж┐рж░рж╕рзНржерж╛рзЯрзА ржмржирзНржжрзЛржмрж╕рзНржд","рж╕ржорзНржкржж ржирж┐рж░рзНржЧржоржи","ржЕржмрж╛ржз ржмрж╛ржгрж┐ржЬрзНржп"], ans:"рж╕ржорзНржкржж ржирж┐рж░рзНржЧржоржи", explain:"Drain of Wealth ржирж╛ржорзЗ рж╕ржорж╛рж▓рзЛржЪрж┐рждрж╛рзЯ ржмрж░рзНржгрж┐рждред"},
        {q:"ржмрзНрж░рж┐ржЯрж┐рж╢ рж╢рж╛рж╕ржиржХрж╛рж▓рзЗ 'рж╕рзНржмржжрзЗрж╢рзА ржЖржирзНржжрзЛрж▓ржи' ржХрзЛржи ржШржЯржирж╛рж░ ржкрзНрж░рждрж┐ржХрзНрж░рж┐рзЯрж╛?", opts:["ржирзАрж▓ ржмрж┐ржжрзНрж░рзЛрж╣","рж╕рж┐ржкрж╛рж╣рзА ржмрж┐ржжрзНрж░рзЛрж╣","ржмржЩрзНржЧржнржЩрзНржЧ","ржЪрж┐рж░рж╕рзНржерж╛рзЯрзА ржмржирзНржжрзЛржмрж╕рзНржд"], ans:"ржмржЩрзНржЧржнржЩрзНржЧ", explain:"ржмржЩрзНржЧржнржЩрзНржЧрзЗрж░ ржкрж░ рж╕рзНржмржжрзЗрж╢рзА ржЖржирзНржжрзЛрж▓ржи ржЬрзЛрж░рзЗ ржУржарзЗред"},
        {q:"рззрзорзйрзж рж╕рж╛рж▓рзЗ рж░рж╛ржЬрж╛ рж░рж╛ржоржорзЛрж╣ржи рж░рж╛ржпрж╝ ржкрзНрж░рждрж┐рж╖рзНржарж┐ржд рж╕ржВржЧржаржи ржХрзЛржиржЯрж┐?", opts:["ржорзБрж╕рж▓рж┐ржо рж▓рзАржЧ","ржЬрж╛рждрзАржпрж╝ ржХржВржЧрзНрж░рзЗрж╕","ржмрзНрж░рж┐ржЯрж┐рж╢ ржЗржирзНржбрж┐рзЯрж╛ рж╕рзЛрж╕рж╛ржЗржЯрж┐","ржмрзНрж░рж╛рж╣рзНржо рж╕ржорж╛ржЬ"], ans:"ржмрзНрж░рж╛рж╣рзНржо рж╕ржорж╛ржЬ", explain:"рж░рж╛ржоржорзЛрж╣ржи рж░рж╛рзЯрзЗрж░ ржмрзНрж░рж╛рж╣рзНржо рж╕ржорж╛ржЬ рж╕ржВрж╕рзНржХрж╛рж░рзЗ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржнрзВржорж┐ржХрж╛ред"}
      ]
    },
    Science: { "ржорж╣рж╛ржХрж╛рж╢":["sample question"] }, Bangla:{"Bangla":["sample"]}, English:{"English":["sample"]}
  },

  9: {
    BGS: {"BGS 1":[ {q:"ржмрж╛ржВрж▓рж╛ржжрзЗрж╢ рж╕рзНржмрж╛ржзрзАржи рж╣рзЯ ржХржмрзЗ?", opts:["рззрзпрзнрзж","рззрзпрзнрзз","рззрзпрзнрзи","рззрзпрзнрзй"], ans:"рззрзпрзнрзз", explain:"рззрзпрзнрзз рж╕рж╛рж▓ рж╕рзНржмрж╛ржзрзАржирждрж╛рж░ ржмржЫрж░ред"} ]},
    Science: {"Science 1":[ {q:"ржкрж╛ржирж┐ ржХрж┐ рж░рд╕рд╛рдпржирж┐ржХ ржпрзМржЧ?", opts:["рж╣рзНржпрж╛ржБ","ржирж╛","ржоржзрзНржпрзЗ","ржХржЦржиржУ ржирж╛"], ans:"рж╣рзНржпрж╛ржБ", explain:"ржкрж╛ржирж┐ ржПржХржЯрж┐ ржпрзМржЧ H2Oред"} ]},
    Bangla: {"Bangla":[ {q:"ржмрж╛ржВрж▓рж╛ ржнрж╛рж╖рж╛рж░ рж░ржЪржпрж╝рж┐рждрж╛ ржХрзЗ?", opts:["рж░ржмрзАржирзНржжрзНрж░ржирж╛рже","ржХрж╛ржЬрзА ржиржЬрж░рзБрж▓","рж╢рж╛ржорж╕рзБрж░","ржмрзЗрж▓рж╛"], ans:"рж░ржмрзАржирзНржжрзНрж░ржирж╛рже", explain:"ржЙржжрж╛рж╣рж░ржгред"} ]},
    English: {"English":[ {q:"Who wrote 'Macbeth'?", opts:["Shakespeare","Dickens","Austen","Rowling"], ans:"Shakespeare", explain:"William Shakespeare."} ]}
  }
};

/* ============== STATE ============== */
let ACTIVE_CLASS = null, ACTIVE_SUB = null, ACTIVE_LESSON = null;
let QUESTIONS = [], CURRENT = 0, SCORE = 0, ANSWERED=false, TIMER_ID=null, TIME_LEFT=0;
let SHUFFLE = true;

/* ============== UI refs ============== */
const lessonSelect = document.getElementById('lessonSelect');
const startBtn = document.getElementById('startBtn');
const lessonInfo = document.getElementById('lessonInfo');

/* ======= functions to choose class/subject/lesson ======= */
function chooseClass(c){
  ACTIVE_CLASS = Number(c);
  populateLessons();
  startBtn.disabled = !(ACTIVE_CLASS && ACTIVE_SUB);
}
function chooseSubject(s){
  // support BGS alias from UI
  if(s === 'BGS') ACTIVE_SUB = 'BGS'; else ACTIVE_SUB = s;
  populateLessons();
  startBtn.disabled = !(ACTIVE_CLASS && ACTIVE_SUB);
}
function populateLessons(){
  lessonSelect.innerHTML = '';
  if(!ACTIVE_CLASS || !ACTIVE_SUB || !LESSONS[ACTIVE_CLASS] || !LESSONS[ACTIVE_CLASS][ACTIVE_SUB]){
    lessonSelect.innerHTML = '<option value="">-- ржкрзНрж░ржержорзЗ Class ржУ Subject рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзЛ --</option>';
    lessonInfo.innerText = 'Select class & subject first';
    startBtn.disabled = true;
    return;
  }
  const arr = LESSONS[ACTIVE_CLASS][ACTIVE_SUB];
  lessonSelect.innerHTML = '<option value="">-- ржПржХржЯрж┐ Lesson рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзЛ --</option>';
  arr.forEach(l=>{ const o = document.createElement('option'); o.value = l; o.innerText = l; lessonSelect.appendChild(o); });
  lessonInfo.innerText = `Selected: Class ${ACTIVE_CLASS} тАв ${ACTIVE_SUB}`;
  startBtn.disabled = false;
}
function chooseLesson(v){ ACTIVE_LESSON = v; }

/* ======= start quiz ======= */
function startQuiz(){
  const t = Number(document.getElementById('timerInput').value) || 30;
  TIME_PER_Q = Math.max(5, Math.min(600, t));
  // get questions
  if(!ACTIVE_CLASS || !ACTIVE_SUB || !ACTIVE_LESSON){ alert('Class/Subject/Lesson рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзЛ'); return; }
  const bucket = ((BANK[ACTIVE_CLASS] && BANK[ACTIVE_CLASS][ACTIVE_SUB] && BANK[ACTIVE_CLASS][ACTIVE_SUB][ACTIVE_LESSON]) || []);
  QUESTIONS = JSON.parse(JSON.stringify(bucket)); // deep copy
  if(QUESTIONS.length === 0){ alert('ржПржЗ рж▓рзЗрж╕ржирзЗ ржХрзЛржи ржкрзНрж░рж╢рзНржи ржирзЗржЗ тАФ ржЕржирзНржп рж▓рзЗрж╕ржи рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзЛ'); return; }
  if(SHUFFLE) { shuffle(QUESTIONS); QUESTIONS.forEach(q=>shuffle(q.opts)); }
  CURRENT = 0; SCORE = 0; ANSWERED=false;
  // UI switch
  document.getElementById('startCard').classList.add('hidden');
  document.getElementById('resultCard').classList.add('hidden');
  document.getElementById('quizCard').classList.remove('hidden');
  renderQuestion();
}

/* ======= render question ======= */
function renderQuestion(){
  clearTimer();
  ANSWERED = false;
  const q = QUESTIONS[CURRENT];
  document.getElementById('questionText').innerText = q.q;
  const optsArea = document.getElementById('optionsArea'); optsArea.innerHTML = '';
  q.opts.forEach(opt=>{
    const b = document.createElement('button'); b.className='opt'; b.innerText = opt;
    b.onclick = ()=>selectOption(b,opt);
    optsArea.appendChild(b);
  });
  document.getElementById('explainBox').classList.add('hidden'); document.getElementById('explainBox').innerText='';
  updateProgress();
  // timer
  TIME_LEFT = Number(document.getElementById('timerInput').value) || 30; updateTimer();
  TIMER_ID = setInterval(()=>{ TIME_LEFT--; updateTimer(); if(TIME_LEFT<=0){ clearTimer(); onTimeout(); } },1000);
}
function updateProgress(){
  const pct = QUESTIONS.length? Math.round((CURRENT/QUESTIONS.length)*100):0;
  document.getElementById('progressBar').style.width = pct + '%';
  document.getElementById('scoreBox').innerText = `Score: ${SCORE}`;
  document.getElementById('qCount').innerText = `ржкрзНрж░рж╢рзНржи ${Math.min(CURRENT+1,QUESTIONS.length)} / ${QUESTIONS.length}`;
}
function updateTimer(){ document.getElementById('timerBox').innerText = `тП▒ ${TIME_LEFT}s`; }

/* ======= select option ======= */
function selectOption(btn, chosen){
  if(ANSWERED) return;
  ANSWERED = true;
  // disable all
  document.querySelectorAll('#optionsArea .opt').forEach(b=>b.disabled=true);
  const q = QUESTIONS[CURRENT];
  if(chosen === q.ans){ btn.classList.add('correct'); SCORE++; }
  else { btn.classList.add('wrong'); // highlight correct
    document.querySelectorAll('#optionsArea .opt').forEach(b=>{ if(b.innerText === q.ans) b.classList.add('correct'); });
  }
  if(q.explain){ const ex = document.getElementById('explainBox'); ex.innerText = q.explain; ex.classList.remove('hidden'); }
  updateProgress(); clearTimer();
}

/* ======= next & timeout ======= */
function onNext(){
  // if not answered, treat as skipped (show correct)
  if(!ANSWERED){
    document.querySelectorAll('#optionsArea .opt').forEach(b=>{ b.disabled=true; if(b.innerText === QUESTIONS[CURRENT].ans) b.classList.add('correct'); });
    if(QUESTIONS[CURRENT].explain){ const ex=document.getElementById('explainBox'); ex.innerText=QUESTIONS[CURRENT].explain; ex.classList.remove('hidden'); }
  }
  if(CURRENT < QUESTIONS.length - 1){ CURRENT++; renderQuestion(); } else showResult();
}
function onTimeout(){
  // show correct, then auto next after short delay
  document.querySelectorAll('#optionsArea .opt').forEach(b=>{ b.disabled=true; if(b.innerText === QUESTIONS[CURRENT].ans) b.classList.add('correct'); });
  if(QUESTIONS[CURRENT].explain){ const ex=document.getElementById('explainBox'); ex.innerText=QUESTIONS[CURRENT].explain; ex.classList.remove('hidden'); }
  ANSWERED=true;
  updateProgress();
  setTimeout(()=>{ if(CURRENT < QUESTIONS.length -1){ CURRENT++; renderQuestion(); } else showResult(); }, 1100);
}
function clearTimer(){ if(TIMER_ID){ clearInterval(TIMER_ID); TIMER_ID=null; } }

/* ======= show result & leaderboard ======= */
function showResult(){
  clearTimer();
  document.getElementById('quizCard').classList.add('hidden');
  document.getElementById('resultCard').classList.remove('hidden');
  document.getElementById('finalText').innerText = `рждрзБржорж┐ ржорзЛржЯ ${QUESTIONS.length} ржПрж░ ржоржзрзНржпрзЗ ${SCORE} рж╕ржарж┐ржХ ржЙрждрзНрждрж░ ржХрж░рзЗржЫрзЛред`;
  renderLeaderboard();
}
function saveScore(){
  const name = (document.getElementById('playerName').value || 'Guest').trim().slice(0,30);
  const rec = { name, score:SCORE, total:QUESTIONS.length, cls:ACTIVE_CLASS, sub:ACTIVE_SUB, lesson:ACTIVE_LESSON, at:new Date().toISOString() };
  const key='ExamBangla_LB_v2'; let data = JSON.parse(localStorage.getItem(key)||'[]');
  data.push(rec); data.sort((a,b)=> (b.score - a.score) || (new Date(b.at)- new Date(a.at)) );
  localStorage.setItem(key, JSON.stringify(data.slice(0,200)));
  alert('Score saved!');
  renderLeaderboard();
}
function renderLeaderboard(){
  const key='ExamBangla_LB_v2'; const data = JSON.parse(localStorage.getItem(key)||'[]');
  const list = document.getElementById('leaderList'); list.innerHTML='';
  if(data.length===0){ list.innerHTML='<li class="small">ржХрзЗржЙ ржирзЗржЗ тАФ рждрзБржорж┐ ржкрзНрж░ржержо рж╣рждрзЗ ржкрж╛рж░рзЛ!</li>'; }
  data.slice(0,10).forEach((r,i)=>{ const li=document.createElement('li'); li.innerHTML=`<strong>${i+1}. ${escapeHtml(r.name)}</strong><span class="small">${r.score}/${r.total}</span>`; list.appendChild(li); });
  document.getElementById('miniLeader').innerText = data.length? `${data[0].name} тАв ${data[0].score}/${data[0].total}` : 'Leaderboard empty';
}

/* ======= share: generate uneditable image card via canvas ======= */
async function generateShareCard(){
  // create canvas with score info
  const canvas = document.createElement('canvas'); canvas.width = 1000; canvas.height = 600;
  const ctx = canvas.getContext('2d');
  // background
  const grad = ctx.createLinearGradient(0,0,canvas.width,canvas.height);
  grad.addColorStop(0,'#06b6d4'); grad.addColorStop(1,'#3b82f6');
  ctx.fillStyle = grad; ctx.fillRect(0,0,canvas.width,canvas.height);
  // header
  ctx.fillStyle = 'rgba(255,255,255,0.95)'; ctx.fillRect(40,40,920,100);
  ctx.fillStyle = '#06283D'; ctx.font = 'bold 36px Poppins'; ctx.fillText('ЁЯПЖ ExamBangla Result', 80, 95);
  // score box
  ctx.fillStyle = 'rgba(255,255,255,0.12)'; ctx.fillRect(60,170,880,320);
  ctx.fillStyle = '#fff'; ctx.font = '700 48px Poppins';
  const name = (document.getElementById('playerName').value || 'Guest');
  ctx.fillText(`Name: ${name}`, 90, 240);
  ctx.fillText(`Class: ${ACTIVE_CLASS || '-'}`, 90, 300);
  ctx.fillText(`Subject: ${ACTIVE_SUB || '-'}`, 90, 360);
  ctx.fillStyle = '#ffdd59'; ctx.fillText(`Score: ${SCORE} / ${QUESTIONS.length}`, 90, 430);
  ctx.fillStyle = '#fff'; ctx.font = '16px Poppins';
  ctx.fillText(`Lesson: ${ACTIVE_LESSON || '-'}`, 90, 480);
  ctx.fillText(`Date: ${new Date().toLocaleString()}`, 90, 510);
  ctx.fillText(`Powered by ExamBangla`, 700, 560);

  // convert to blob and share
  canvas.toBlob(async (blob)=>{
    if(!blob){ alert('Share failed тАФ try download'); return; }
    const file = new File([blob], 'ExamBangla_result.png', { type: 'image/png' });
    // try Web Share API
    if(navigator.canShare && navigator.canShare({ files: [file] })){
      try{ await navigator.share({ files:[file], title:'ExamBangla Result', text:`I scored ${SCORE}/${QUESTIONS.length} on ExamBangla` }); return; }
      catch(e){ /* share failed or canceled */ }
    }
    // fallback: download
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href=url; a.download='ExamBangla_result.png'; document.body.appendChild(a); a.click(); a.remove();
    URL.revokeObjectURL(url);
    alert('Result image downloaded тАФ ржЖржкржирж┐ ржПржЯрж┐ рж╢рзЗржпрж╝рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржиред (image is not editable text)');
  }, 'image/png');
}

/* ======= helpers ======= */
function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; } return a; }
function escapeHtml(s){ return (s+'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }
function toggleShuffle(){ SHUFFLE = !SHUFFLE; alert('Shuffle ' + (SHUFFLE? 'ON':'OFF')); }
function abortQuiz(){ if(confirm('ржХрзБржЗржЬ ржерзЗржХрзЗ ржмрзЗрж░ рж╣рждрзЗ ржЪрж╛ржи?')){ restart(); } }
function restart(){ // back to start
  clearTimer();
  ACTIVE_CLASS = ACTIVE_SUB = ACTIVE_LESSON = null;
  QUESTIONS = []; CURRENT = 0; SCORE = 0; ANSWERED = false;
  document.getElementById('startCard').classList.remove('hidden');
  document.getElementById('quizCard').classList.add('hidden');
  document.getElementById('resultCard').classList.add('hidden');
  document.getElementById('lessonSelect').innerHTML = '<option value="">-- ржкрзНрж░ржержорзЗ Class ржУ Subject рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзЛ --</option>';
  document.getElementById('playerName').value = '';
  renderLeaderboard();
}
function clearLeaderboard(){ if(confirm('рж▓рж┐ржбрж╛рж░ржмрзЛрж░рзНржб ржорзБржЫрзЗ ржлрзЗрж▓рждрзЗ ржЪрж╛ржи?')){ localStorage.removeItem('ExamBangla_LB_v2'); renderLeaderboard(); alert('Cleared'); } }
function exportData(){ const data = localStorage.getItem('ExamBangla_LB_v2') || '[]'; const blob = new Blob([data], {type:'application/json'}); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href=url; a.download='exam_bangla_leaderboard.json'; a.click(); URL.revokeObjectURL(url); }

/* ======= init ======= */
document.addEventListener('DOMContentLoaded', ()=>{
  // populate lesson select initial placeholder
  document.getElementById('lessonSelect').innerHTML = '<option value="">-- ржкрзНрж░ржержорзЗ Class ржУ Subject рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзЛ --</option>';
  renderLeaderboard();
});
</script>
</body>
</html>